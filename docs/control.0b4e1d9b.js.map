{"version":3,"sources":["control.js"],"names":["init","document","getElementsByClassName","innerHTML","length","nowPlaySource","context","AudioContext","playSound","file","savedBuffer","xhr","play","source","createBufferSource","buffer","connect","destination","start","XMLHttpRequest","open","getFileURL","responseType","onload","decodeAudioData","response","incomingBuffer","console","log","stop","setTimeout","send","host","preIndex","elem","querySelector","flkty","Flickity","cellAlign","dragThreshold","pageDots","prevNextButtons","on","ready","change","index","pageUpdate","page"],"mappings":";AAAA,IAAIA,EAAO,WACTC,SAASC,uBAAuB,cAAc,GAAGC,UAC/CF,OAAAA,OAAAA,SAASC,uBAAuB,gBAAgBE,SAGpDJ,IAGA,IACIK,EADAC,EAAU,IAAIC,aAGdC,EAAY,SAAAC,GACVC,IAAAA,EASAC,EAPAC,EAAO,WACLC,IAAAA,EAASP,EAAQQ,qBACrBT,EAAgBQ,EAChBA,EAAOE,OAASL,EAChBG,EAAOG,QAAQV,EAAQW,aACvBJ,EAAOK,MAAM,KAEXP,EAAM,IAAIQ,gBACVC,KAAK,MAAOC,EAAWZ,EAAM,2BAA2B,GAC5DE,EAAIW,aAAe,cACnBX,EAAIY,OAAS,WACXjB,EAAQkB,gBAAgBb,EAAIc,SAAU,SAASC,GAC7ChB,EAAcgB,EACdC,QAAQC,IAAIvB,GACNA,IACJsB,QAAQC,IAAIvB,GACZA,EAAcwB,QAEhBC,WAAWlB,EAAM,QAGrBD,EAAIoB,QAGFV,EAAa,SAACZ,EAAMuB,GACZA,MAAAA,GAAAA,OAAAA,EAAevB,YAAAA,OAAAA,IAIvBwB,EAAW,EACXC,EAAOjC,SAASkC,cAAc,YAC9BC,EAAQ,IAAIC,SAASH,EAAM,CAE7BI,UAAW,OACXC,cAAe,GACfC,UAAU,EACVC,iBAAiB,EACjBC,GAAI,CACFC,MAAO,aAGPC,OAAQ,SAASC,GACfC,EAAWD,GACXlB,QAAQC,IAAIK,GACK,IAAbA,GAA4B,IAAVY,EACpBrC,EAAU,kBACY,IAAbyB,GAA4B,IAAVY,EAC3BrC,EAAU,mBACY,IAAbyB,GAA4B,IAAVY,EAC3BrC,EAAU,uBACY,IAAbyB,GAA4B,IAAVY,EAC3BrC,EAAU,mBACY,IAAbyB,GAA4B,IAAVY,EAC3BrC,EAAU,kBACY,IAAbyB,GAA4B,IAAVY,GAC3BrC,EAAU,YAEZyB,EAAWY,MAKjBT,EAAMM,GAAG,cAAe,WACtBlC,EAAU,cAGZ,IAAIsC,EAAa,SAAAC,GACf9C,SAASC,uBAAuB,cAAc,GAAGC,UAAe4C,GAAAA,OAAAA,EAAO,EACrE9C,OAAAA,OAAAA,SAASC,uBAAuB,gBAAgBE","file":"control.0b4e1d9b.js","sourceRoot":"../src/public","sourcesContent":["var init = () => {\n  document.getElementsByClassName(\"pages_text\")[0].innerHTML = `1 / ${\n    document.getElementsByClassName(\"content_cell\").length\n  }`;\n};\ninit();\n\n// Sound 설정 시작\nvar context = new AudioContext();\nvar nowPlaySource;\n\nvar playSound = file => {\n  var savedBuffer;\n  var xhr;\n  var play = () => {\n    var source = context.createBufferSource();\n    nowPlaySource = source;\n    source.buffer = savedBuffer;\n    source.connect(context.destination);\n    source.start(0);\n  };\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"get\", getFileURL(file, \"http://localhost:3000/\"), true);\n  xhr.responseType = \"arraybuffer\";\n  xhr.onload = () => {\n    context.decodeAudioData(xhr.response, function(incomingBuffer) {\n      savedBuffer = incomingBuffer;\n      console.log(nowPlaySource);\n      if (!!nowPlaySource) {\n        console.log(nowPlaySource);\n        nowPlaySource.stop();\n      }\n      setTimeout(play, 500);\n    });\n  };\n  xhr.send();\n};\n\nvar getFileURL = (file, host) => {\n  return `${host}/sounds/${file}`;\n};\n\n// 슬라이드 설정 시작\nvar preIndex = 0;\nvar elem = document.querySelector(\".content\");\nvar flkty = new Flickity(elem, {\n  // options\n  cellAlign: \"left\",\n  dragThreshold: 10,\n  pageDots: false,\n  prevNextButtons: false,\n  on: {\n    ready: function() {\n      //   playSound(\"dawn.mp3\");\n    },\n    change: function(index) {\n      pageUpdate(index);\n      console.log(preIndex);\n      if (preIndex === 2 && index === 3) {\n        playSound(\"first_snow.mp3\");\n      } else if (preIndex === 5 && index === 6) {\n        playSound(\"star_gazing.mp3\");\n      } else if (preIndex === 6 && index === 7) {\n        playSound(\"magical_journey.mp3\");\n      } else if (preIndex === 7 && index === 6) {\n        playSound(\"star_gazing.mp3\");\n      } else if (preIndex === 6 && index === 5) {\n        playSound(\"first_snow.mp3\");\n      } else if (preIndex === 3 && index === 2) {\n        playSound(\"dawn.mp3\");\n      }\n      preIndex = index;\n    }\n  }\n});\n\nflkty.on(\"staticClick\", () => {\n  playSound(\"dawn.mp3\");\n});\n\nvar pageUpdate = page => {\n  document.getElementsByClassName(\"pages_text\")[0].innerHTML = `${page + 1} / ${\n    document.getElementsByClassName(\"content_cell\").length\n  }`;\n};\n"]}