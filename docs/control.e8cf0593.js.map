{"version":3,"sources":["control.js"],"names":["init","document","getElementsByClassName","innerHTML","length","soundInit","dawn","getElementById","magical_journey","star_gazing","muted","loop","playSound","file","play","currentTime","setTimeout","getFileURL","ret","preIndex","elem","querySelector","flkty","Flickity","cellAlign","dragThreshold","pageDots","prevNextButtons","on","ready","console","log","change","index","pageUpdate","page"],"mappings":";AAAA,IAAIA,EAAO,WACTC,SAASC,uBAAuB,cAAc,GAAGC,UAC/CF,OAAAA,OAAAA,SAASC,uBAAuB,gBAAgBE,SAGpDJ,IA+BA,IAAIK,GAAY,EACZC,EAAOL,SAASM,eAAe,QAC/BC,EAAkBP,SAASM,eAAe,mBAC1CE,EAAcR,SAASM,eAAe,eAC1CD,EAAKI,OAAQ,EACbJ,EAAKK,MAAO,EACZH,EAAgBE,OAAQ,EACxBF,EAAgBG,MAAO,EACvBF,EAAYC,OAAQ,EACpBD,EAAYE,MAAO,EAEnB,IAAIC,EAAY,SAAAC,GAID,SAATA,GACFP,EAAKI,OAAQ,EACbJ,EAAKQ,OACLN,EAAgBM,OAChBL,EAAYK,QACM,SAATD,GACTL,EAAgBE,OAAQ,EACxBD,EAAYC,OAAQ,EACpBJ,EAAKS,YAAc,EACnBC,WAAW,WACTV,EAAKI,OAAQ,GACZ,MAIe,oBAATG,GACTP,EAAKI,OAAQ,EACbD,EAAYC,OAAQ,EACpBF,EAAgBO,YAAc,EAC9BC,WAAW,WACTR,EAAgBE,OAAQ,GACvB,MAIe,gBAATG,IACTP,EAAKI,OAAQ,EACbF,EAAgBE,OAAQ,EACxBD,EAAYM,YAAc,EAC1BC,WAAW,WACTP,EAAYC,OAAQ,GACnB,OAkBHO,EAAa,SAAAJ,GACXK,IAAAA,EAAM,GAaHA,MAZM,SAATL,EACFK,EAAM,oEACY,oBAATL,EACTK,EACE,+EACgB,eAATL,EACTK,EACE,qGACgB,gBAATL,IACTK,EACE,4EAEGA,GAILC,EAAW,EACXC,EAAOnB,SAASoB,cAAc,YAC9BC,EAAQ,IAAIC,SAASH,EAAM,CAE7BI,UAAW,OACXC,cAAe,GACfC,UAAU,EACVC,iBAAiB,EACjBC,GAAI,CACFC,MAAO,WACLC,QAAQC,IAAI,UAEdC,OAAQ,SAASC,GACfC,EAAWD,GACN5B,GACHO,EAAU,QAEK,IAAbO,GAA4B,IAAVc,EACpBrB,EAAU,eACY,IAAbO,GAA4B,IAAVc,EAC3BrB,EAAU,mBACY,IAAbO,GAA4B,IAAVc,EAC3BrB,EAAU,eACY,IAAbO,GAA4B,IAAVc,GAC3BrB,EAAU,QAEZO,EAAWc,MAKjBX,EAAMM,GAAG,cAAe,WAIjBvB,GACHO,EAAU,UAId,IAAIsB,EAAa,SAAAC,GACflC,SAASC,uBAAuB,cAAc,GAAGC,UAAegC,GAAAA,OAAAA,EAAO,EACrElC,OAAAA,OAAAA,SAASC,uBAAuB,gBAAgBE","file":"control.e8cf0593.js","sourceRoot":"../src/public","sourcesContent":["var init = () => {\n  document.getElementsByClassName(\"pages_text\")[0].innerHTML = `1 / ${\n    document.getElementsByClassName(\"content_cell\").length\n  }`;\n};\ninit();\n\n// Sound 설정 시작\n// var AudioContext = window.AudioContext || window.webkitAudioContext;\n// var context = new AudioContext();\n// var nowPlaySource;\n\n// var playSound = file => {\n//   var savedBuffer;\n//   var xhr;\n//   var play = () => {\n//     var source = context.createBufferSource();\n//     nowPlaySource = source;\n//     source.buffer = savedBuffer;\n//     source.connect(context.destination);\n//     source.start(0);\n//   };\n//   var xhr = new XMLHttpRequest();\n//   xhr.open(\"get\", getFileURL(file), true);\n//   xhr.responseType = \"arraybuffer\";\n//   xhr.onload = () => {\n//     context.decodeAudioData(xhr.response, function(incomingBuffer) {\n//       savedBuffer = incomingBuffer;\n//       if (!!nowPlaySource) {\n//         nowPlaySource.stop();\n//       }\n//       setTimeout(play, 200);\n//     });\n//   };\n//   xhr.send();\n// };\nvar soundInit = false;\nvar dawn = document.getElementById(\"dawn\");\nvar magical_journey = document.getElementById(\"magical_journey\");\nvar star_gazing = document.getElementById(\"star_gazing\");\ndawn.muted = true;\ndawn.loop = true;\nmagical_journey.muted = true;\nmagical_journey.loop = true;\nstar_gazing.muted = true;\nstar_gazing.loop = true;\n\nvar playSound = file => {\n  //   dawn.play();\n  //   magical_journey.play();\n  //   star_gazing.play();\n  if (file === \"init\") {\n    dawn.muted = false;\n    dawn.play();\n    magical_journey.play();\n    star_gazing.play();\n  } else if (file === \"dawn\") {\n    magical_journey.muted = true;\n    star_gazing.muted = true;\n    dawn.currentTime = 0;\n    setTimeout(() => {\n      dawn.muted = false;\n    }, 500);\n    // dawn.muted = false;\n    // dawn.loop = true;\n    // dawn.play();\n  } else if (file === \"magical_journey\") {\n    dawn.muted = true;\n    star_gazing.muted = true;\n    magical_journey.currentTime = 0;\n    setTimeout(() => {\n      magical_journey.muted = false;\n    }, 500);\n    // magical_journey.muted = false;\n    // magical_journey.loop = true;\n    // magical_journey.play();\n  } else if (file === \"star_gazing\") {\n    dawn.muted = true;\n    magical_journey.muted = true;\n    star_gazing.currentTime = 0;\n    setTimeout(() => {\n      star_gazing.muted = false;\n    }, 500);\n    // star_gazing.muted = false;\n    // star_gazing.loop = true;\n    // star_gazing.play();\n  }\n  //   if (!!sound) {\n  //     sound.pause();\n  //   }\n  //   alert(sound);\n  //   sound = document.getElementById(file);\n  //   sound.currentTime = 0;\n  //   sound.loop = true;\n  //   //   setTimeout(() => {\n  //   //     sound.play();\n  //   //   }, 200);\n  //   sound.play();\n};\n\nvar getFileURL = file => {\n  var ret = \"\";\n  if (file === \"dawn\") {\n    ret = \"https://dl.dropboxusercontent.com/s/4gre7t0md3z7skd/dawn.mp3?dl=0\";\n  } else if (file === \"magical_journey\") {\n    ret =\n      \"https://dl.dropboxusercontent.com/s/n27d4jo5le70cxf/magical_journey.mp3?dl=0\";\n  } else if (file === \"first_snow\") {\n    ret =\n      \"https://dl.dropboxusercontent.com/s/8a6a0s739iacjjy/music_zapsplat_rabbits_first_snow_143.mp3?dl=0\";\n  } else if (file === \"star_gazing\") {\n    ret =\n      \"https://dl.dropboxusercontent.com/s/v04fwko5ggxdjb3/star_gazing.mp3?dl=0\";\n  }\n  return ret;\n};\n\n// 슬라이드 설정 시작\nvar preIndex = 0;\nvar elem = document.querySelector(\".content\");\nvar flkty = new Flickity(elem, {\n  // options\n  cellAlign: \"left\",\n  dragThreshold: 10,\n  pageDots: false,\n  prevNextButtons: false,\n  on: {\n    ready: function() {\n      console.log(\"start\");\n    },\n    change: function(index) {\n      pageUpdate(index);\n      if (!soundInit) {\n        playSound(\"init\");\n      }\n      if (preIndex === 2 && index === 3) {\n        playSound(\"star_gazing\");\n      } else if (preIndex === 5 && index === 6) {\n        playSound(\"magical_journey\");\n      } else if (preIndex === 6 && index === 5) {\n        playSound(\"star_gazing\");\n      } else if (preIndex === 3 && index === 2) {\n        playSound(\"dawn\");\n      }\n      preIndex = index;\n    }\n  }\n});\n\nflkty.on(\"staticClick\", () => {\n  //   if (!nowPlaySource) {\n  //     playSound(\"dawn\");\n  //   }\n  if (!soundInit) {\n    playSound(\"init\");\n  }\n});\n\nvar pageUpdate = page => {\n  document.getElementsByClassName(\"pages_text\")[0].innerHTML = `${page + 1} / ${\n    document.getElementsByClassName(\"content_cell\").length\n  }`;\n};\n"]}